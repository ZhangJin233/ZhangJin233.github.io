<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="map[name:阿金]">
<meta name="description" content="一、EarlGrey2 cocoapods 安装 1、在podfile 引入 EarlGrey2依赖，不用具体到EarlGrey2 branch target &amp;#39;EarlGreyExampleSwift&amp;#39; do pod &amp;#39;EarlGreyApp&amp;#39; end target &amp;#39;EarlGreyExampleUITests&amp;#39; do #inherit! :search_paths pod &amp;#39;EarlGreyTest&amp;#39; end target &amp;#39;EarlGreyExampleSwiftUITests&amp;#39; do" />
<meta name="keywords" content="Hugo, blog, reading, kotlin, java, programming, python, EarlGrey2, IOS UI test" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://jane-dev.com/technology/EarlGrey/" />


    <title>
        
            EarlGrey2 cocoapods 安装 及 使用  :: 阿金&#39;s blog  — Hello
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://jane-dev.com/main.min.84ed5579024525d4b50458514d1a43e40dd5272df45c7cd6da85b225af457154.css">





<meta itemprop="name" content="EarlGrey2 cocoapods 安装 及 使用 ">
<meta itemprop="description" content="EarlGrey2 UI test">


<meta itemprop="datePublished" content="2020-11-27T11:06:20&#43;08:00" />
<meta itemprop="dateModified" content="2020-11-27T11:06:20&#43;08:00" />
<meta itemprop="wordCount" content="643">



<meta itemprop="keywords" content="EarlGrey2,IOS UI test," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jane-dev.com"/>

<meta name="twitter:title" content="EarlGrey2 cocoapods 安装 及 使用 "/>
<meta name="twitter:description" content="EarlGrey2 UI test"/>





    <meta property="article:published_time" content="2020-11-27 11:06:20 &#43;0800 &#43;0800" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://jane-dev.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://jane-dev.com/about/">About</a></li><li><a href="https://jane-dev.com/movie/">Movie</a></li><li><a href="https://jane-dev.com/reading/">Reading</a></li><li><a href="https://jane-dev.com/technology/">Technology</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://jane-dev.com/technology/EarlGrey/">EarlGrey2 cocoapods 安装 及 使用</a></h2>

            

            <div class="post-content">
                

<p>一、EarlGrey2 cocoapods 安装</p>

<p>1、在podfile 引入 EarlGrey2依赖，不用具体到EarlGrey2 branch</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">target <span style="color:#e6db74">&#39;EarlGreyExampleSwift&#39;</span> <span style="color:#66d9ef">do</span>
  pod <span style="color:#e6db74">&#39;EarlGreyApp&#39;</span>
<span style="color:#66d9ef">end</span>

target <span style="color:#e6db74">&#39;EarlGreyExampleUITests&#39;</span> <span style="color:#66d9ef">do</span>
  <span style="color:#75715e">#inherit! :search_paths</span>
  pod <span style="color:#e6db74">&#39;EarlGreyTest&#39;</span>
<span style="color:#66d9ef">end</span>

target <span style="color:#e6db74">&#39;EarlGreyExampleSwiftUITests&#39;</span> <span style="color:#66d9ef">do</span>
  <span style="color:#75715e">#inherit! :search_paths</span>
  pod <span style="color:#e6db74">&#39;EarlGreyTest&#39;</span>
<span style="color:#66d9ef">end</span></code></pre></div>
<p>2、pod install 下载相应文件依赖</p>

<p>3、运行的时候，如果报错  bitcode bundle could not be generated because &hellip;</p>

<p>在pods 文件下 找到 TARGETS的 EarlGreyTest ，将 enable Bitcode 设置为NO</p>

<figure>
    <img src="https://jane-dev.com/images/EarlGrey2.png"
         alt="EarlGrey2"/> 
</figure>


<p>4、运行项目，运行成功</p>

<p>二、EarlGrey2 原理及使用</p>

<p>EarlGrey 2.0 is a native iOS UI automation test framework that combines EarlGrey with XCUITest, Apple&rsquo;s official UI Testing Framework.</p>

<p>EarlGrey 2.0 allows you to write clear, concise tests in Objective-C / Swift and enables out of process interactions with XCUITest. It has the following chief advantages:</p>

<p>Synchronization: From run to run, EarlGrey 2.0 ensures that you will get the same result in your tests, by making sure that the application is idle. It does so by automatically tracking UI changes, network requests and various queues. EarlGrey 2.0 also allows you to manually implement custom timings.</p>

<p>White-box: EarlGrey 2.0 allows you to query the application under test from your tests.</p>

<p>Native Development: As with EarlGrey 1.0, you can use EarlGrey 2.0 natively with Xcode. You can run tests directly from Xcode or xcodebuild. Please note that EarlGrey 2.0 uses a UI Testing Target and not a Unit Testing Target like EarlGrey 1.0.</p>

<p>EarlGrey 1.0 is a white-box testing tool that allows you to interact with the application under test. Since XCUITest is a black-box testing framework, this is not directly possible with EarlGrey 2.0. To fix this, we use eDistantObject (eDO) to allow these white-box interactions.</p>

<p>这是官方GitHub给的说明，主要就是几点：</p>

<ul>
<li><p>EarlGrey 2.0 是基于原生的Apple UI 测试框架 XCUITest</p></li>

<li><p>EarlGrey 2.0 可以支持 Objective-C / Swift，可以直接在Xcode的中运行使用</p></li>

<li><p>EarlGrey 2.0 不可以在Unit Testing 中使用（EarlGrey 1.0是可以的）</p></li>

<li><p>eDistantObject (eDO) 是为了 使EarlGrey 2.0 支持 白盒测试</p></li>

<li><p>EarlGrey 2.0 可以测试 UI 变化，网络请求以及各种问题</p></li>
</ul>

<h4 id="earlgrey-2-0-advantages-over-xcuitest">EarlGrey 2.0 advantages over XCUITest</h4>

<ul>
<li><p>Automatic synchronization with Animations, Dispatch Queues, and Network Requests as enumerated here.</p></li>

<li><p>In-built White-Box Testing Support with RMI.</p></li>

<li><p>Better Support for Flakiness（分层） Issues.</p></li>

<li><p>Better Control of tests. EarlGrey has a much larger set of matchers.</p></li>

<li><p>EarlGrey performs a pixel-by-pixel（逐个像素） check for the visibility of an element.</p></li>
</ul>

<h4 id="earlgrey-2-0-advantages-over-earlgrey-1-0">EarlGrey 2.0 advantages over EarlGrey 1.0</h4>

<ul>
<li><p>Out of Process Testing using XCUITest. So System Alerts, Inter-app interactions etc. are supported</p></li>

<li><p>Lesser throttling of the application under test&rsquo;s main thread.</p></li>

<li><p>Better support since accessibility is provided out of the box with XCUITest.</p></li>
</ul>

<p>可以参考官方文档以及 demo：</p>

<p><a href="http://google.github.io/EarlGrey/index.html" rel="nofollow noreferrer" target="_blank">http://google.github.io/EarlGrey/index.html</a></p>

<p><a href="https://github.com/google/EarlGrey/blob/earlgrey2/Demo/EarlGreyExample/EarlGreyExampleUITests/EarlGreyExampleUITests.m" rel="nofollow noreferrer" target="_blank">https://github.com/google/EarlGrey/blob/earlgrey2/Demo/EarlGreyExample/EarlGreyExampleUITests/EarlGreyExampleUITests.m</a></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
  				<p>
  					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://jane-dev.com/tags/EarlGrey2">EarlGrey2</a></span><span class="tag"><a href="https://jane-dev.com/tags/IOS-UI-test">IOS UI test</a></span>
  				</p>
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://jane-dev.com">阿金</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="https://jane-dev.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://jane-dev.com/bundle.min.8047d1b063234db7e4f910f9d54abd62686428b775f14770e6c6314980002e1d3014e6f9d5df0df37d0a5fd3a15f20b320fb949c4f014e74059de1c57eb0e40a.js" integrity="sha512-gEfRsGMjTbfk&#43;RD51Uq9YmhkKLd18Udw5sYxSYAALh0wFOb51d8N830KX9OhXyCzIPuUnE8BTnQFneHFfrDkCg=="></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-141032533-1', 'auto');
        ga('send', 'pageview');
    </script>



    </body>
</html>
